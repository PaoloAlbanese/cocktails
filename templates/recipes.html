{% extends "base.html" %}
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    {% block title %}
    <title>Cocktails Recipes</title>
    {% endblock %}
<!-- </head>
<body> -->
    {% block content %}
    <br>
    {% if queryTerm %}
    <h1 class="mx-auto">{{queryTerm}}</h1>
    {% else %}
    <h1 class="mx-auto">Displaying all Recipes</h1>
    {% endif %}
    {% for recipe in recipes %}
        <a href="{{ url_for('recipe', recipe_id=recipe._id) }}">{{ recipe.recipe_name }}</a>

        {% if session.user %}
        {% if session.user|lower == recipe.author|lower %}
        <a href="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" onclick="keepFields()" id="recipe_name">
            <button type="submit" class="btn-large light-blue darken-1 text-shadow" onclick="keepFields()">
                Edit Recipe <i class="fas fa-plus-square right"></i>
            </button>
        </a>
        {% endif %}
        {% if session.user|lower == recipe.author|lower or session.user|lower == 'admin' %}
        <a href="{{ url_for('delete_recipe', recipe_id=recipe._id, username=recipe.author) }}">
            <button type="submit" class="btn-large light-blue darken-1 text-shadow">
                Delete Recipe <i class="fas fa-plus-square right"></i>
            </button>
        </a>
        {% endif %}
        {% endif %}

        <br>
        {{ recipe.recipe_description }}<br>
        <p>Preparation Time: {{ recipe.time[0] }} minutes</p><br>
        {% if recipe.time[1] %}<p>Cook Time: {{ recipe.time[1] }} minutes</p><br>{% endif %}
        {% if recipe.time[2] %}<p>{{ recipe.time[2] }}</p><br>{% endif %}

        {% for ingridient in recipe.ingridients %}
            
            <!-- <p class="">{{ingridient[1]}} {% if ingridient[2] != 'not applicable' %}{{ingridient[2]}}{% endif %} {{ingridient[0]}} {{ingridient[3]}}</p> -->

            <p>{% if ingridient[2] == 'not applicable' %}{% if ingridient[1]|string == '0.5'  %}1/2 {% elif ingridient[1]|string == '0.25'  %}1/4 {% elif ingridient[1]|string == '0.75'  %}3/4 {% elif ingridient[1]|string == '1'  %} {% else %}{{ingridient[1]}}{% endif %}{% elif ingridient[2] != 'not applicable' %}{{ingridient[1]}}{% endif %} 
                                            {% if ingridient[2] != 'not applicable' %} {% if ingridient[2] == 'drops' %}{% if (ingridient[1])|string == '1'  %}drop{% else %}{{ingridient[2]}}{%endif%}{{ingridient[2]}}{% else %}{{ingridient[2]}}{% endif %}{% endif %} 
                                            {{ingridient[0]}}{% if ingridient[3] %},{% endif %} {{ingridient[3]}}</p>

        {% endfor %}
        {% for step in recipe.steps %}
        <h6>Step {{ loop.index }}:</h6>
        <p>{{ step }}</p>
        {% endfor %}
        {{ recipe.tags }}<br>
        {{ recipe.author }}<br>
    <br>
        {% endfor %}

    {% endblock %}    
<!-- </body>
</html> -->